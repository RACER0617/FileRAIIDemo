# FileRAII Library and Demo

## Описание проекта

Работу выполнил Морохия Астан Эрикович, студент ГУАП группы 4226, 3 курс. IT-школа Протей.
## Описание проекта

Проект состоит из библиотеки **FileRAII**, реализующей работу с файловой системой в стиле RAII, и демонстрационного приложения **FileRAIIDemo**, показывающего использование библиотеки и обработку ошибок.

## Скомпилированный проект

Скомпилированный проект уже присутствует. Он находится в build.rar по пути \build\Debug

### Структура проекта

```
/                # Корень проекта
├── CMakeLists.txt       # Сборка через CMake
├── File.hpp             # Заголовок библиотеки
├── File.cpp             # Реализация библиотеки
└── main.cpp             # Демонстрационная программа
```

## Возможности библиотеки FileRAII

1. **Конструктор**

   - Открывает файл при создании объекта `File(const std::filesystem::path& path, Mode mode)`.
   - `Mode` — режим работы: `Read` или `Write`.

2. **Деструктор**

   - Закрывает файл автоматически при выходе объекта из области видимости (RAII).

3. **Методы**

   - `std::string readLine()` — читает одну строку, проверяет EOF и выбрасывает исключение при ошибке чтения.
   - `void writeLine(const std::string& line)` — записывает строку, добавляет `\n`, проверяет поток и выбрасывает исключение при ошибке записи.

4. **Исключения**

   - При ошибке открытия, чтения, записи или неверном режиме работы выбрасывается `std::runtime_error` с информативным сообщением.

## Демонстрационная программа FileRAIIDemo

Приложение `main.cpp` предлагает пользователю меню:

1. Записать текст в `demo.txt` (ASCII только).
2. Прочитать текст из указанного файла (ASCII только).
3. Тест: открыть несуществующий файл.
4. Тест: вызвать `readLine` в режиме записи.
5. Тест: вызвать `writeLine` в режиме чтения.
6. Тест: чтение бинарного файла `zero.bin`.
7. Тест: запись в защищённый путь.

Для каждого выбора демонстрируются соответствующие сценарии и выводятся сообщения об ошибках, если они возникают.

## Сборка проекта

### CMake (Windows)

1. Создайте папку сборки и перейдите в неё:
   ```bash
   mkdir build
   cd build
   ```
2. Сгенерируйте файлы сборки и соберите:
   ```bash
   cmake ..
   cmake --build .
   ```
3. Запустите демонстрацию:
   ```bash
   ./FileRAIIDemo
   ```

#### CMake (Linux)
1. Перейдите в корневую папку проекта:
   ```bash
   cd /path/to/your/project

2. Создайте каталог сборки и зайдите в него:
   ```bash
    mkdir build && cd build

3. Сгенерируйте файлы сборки и соберите Debug-конфигурацию:
   ```bash
   cmake ..
   make      # или cmake --build .

4. Запустите программу
    ```bash
   ./FileRAIIDemo

### Visual Studio

1. Откройте VS.
2. Выберите **File → Open → Folder...** и укажите корень проекта.
3. VS распознает `CMakeLists.txt` и настроит CMake.

## Используемые технологии

- **C++17**: статический `static_assert` проверяет уровень стандарта.
- **std::filesystem**: работа с путями.
- **std::fstream**: открытие, чтение и запись файлов.
- **std::runtime\_error**: обработка ошибок через исключения.
- **CMake**: организация сборки библиотеки и приложения.

## Дополнительные требования

В папке с скомпилированной программой должны быть файлы noread.txt и protected.txt в которых должен быть текст на русском языке. Они нужны для тестирований 6 и 7 (6 тест пытается прочитать русский текст, а 7 текст пытается его записать).

## Завершение

Задание выполнено полностью:

- Реализована библиотека с парадигмой RAII.
- Все пункты задания покрыты.
- Проект собирается через CMake и легко интегрируется в Visual Studio.

